
<div class="container p-3 my-3 bg-white">
  <div class="row">
    <div class="col-sm-12">
      <h1><b>Cree su cuenta</b></h1>
    </div>
    <div class="col-sm-12">
      <form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>

        <div class="form-group">
          <label for="username">Nombre de usuario</label>
          <input type="text" class="form-control" name="username" [(ngModel)]="form.username" required minlength="3" maxlength="20" #username="ngModel"/>
          
          <div class="alert-warning d-flex align-items-center" *ngIf="username.errors && f.submitted">
            <div *ngIf="username.errors.required">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgCampoObligatorio }}
            </div>
            <div *ngIf="username.errors.minlength || username.errors.maxlength">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgNombreUsuarioLongitud }}
            </div>
          </div>
        </div><!-- Nombre usu -->
  
        <div class="form-group">
          <label for="email">Correo electrónico</label>
          <input type="email" class="form-control" name="email" [(ngModel)]="form.email" required email #email="ngModel"/>
  
          <div class="alert-warning d-flex align-items-center" *ngIf="email.errors && f.submitted">
            <div *ngIf="email.errors.required">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgCampoObligatorio }}
            </div>
            <div *ngIf="email.errors.email">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgEmailUsuario }}
            </div>
          </div>
        </div><!-- email usu -->
  
        <div class="form-group">
          <label for="password">Contraseña</label>
          <input type="password" class="form-control" name="password" [(ngModel)]="form.password" required minlength="6" #password="ngModel"/>
          <div class="alert-warning d-flex align-items-center" *ngIf="password.errors && f.submitted">
            <div *ngIf="password.errors.required">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgCampoObligatorio }}
            </div>
            <div *ngIf="password.errors.minlength">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgContrasenaUsuarioLongitud }}
            </div>
          </div>
        </div><!-- pwd usu -->

        <div class="form-group">
          <label for="password2">Confirme la contraseña</label>
          <input type="password" class="form-control" name="password2" required minlength="6" #password2/>
          <div class="alert-warning d-flex align-items-center" *ngIf="!password2.required || (password2.value != password.value) || password2.value == '' || password.value == '' ">
            <div *ngIf="!password2.required">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgCampoObligatorio }}
            </div>
            <div *ngIf="password2.value != password.value || password2.value == '' || password.value == '' ">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgContrasenasDistintas }}
            </div>
          </div>
          <div class="alert-success d-flex align-items-center" *ngIf="password2.value == password.value && password2.value != '' && password.value != '' ">
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
              </svg>
              {{ msgContrasenasIguales }}
            </div>
          </div>
        </div><!-- confirmar pwd usu -->
  
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label for="firstName">Nombre</label>
              <input type="text" class="form-control" name="firstName" [(ngModel)]="form.firstName" required maxlength="25" #firstName="ngModel"/>
                <div class="alert-warning d-flex align-items-center" *ngIf="firstName.errors && f.submitted">
                  <div *ngIf="firstName.errors.required">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                      <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    {{ msgCampoObligatorio }}
                  </div>
                  <div *ngIf="firstName.errors.maxlength">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                      <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    {{ msgNombreLongitud }}
                  </div>
                </div>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="lastName">Apellidos</label>
              <input type="text" class="form-control" name="lastName" [(ngModel)]="form.lastName" required #lastName="ngModel"/>
              <div class="alert-warning d-flex align-items-center" *ngIf="lastName.errors && f.submitted">
                <div *ngIf="lastName.errors.required">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                  </svg>
                  {{ msgCampoObligatorio }}
                </div>
              </div>
            </div>
          </div>
        </div><!-- nombre y apellidos del usu -->

        <!-- Checkbox para aceptar terminos y condiciones de uso 
        <div class="form-group">
          <input type="checkbox" class="form-check-input is-invalid" name="acceptTerms" [(ngModel)]="form.acceptTerms" required #acceptTerms="ngModel" />
          <label for="acceptTerms">Aceptar términos y condiciones de uso.</label>
        </div>
        -->
  
        <div class="form-group">
          <label for="binanceSecret">Clave secreta de Binance</label>
          <input type="text" class="form-control" name="binanceSecret" [(ngModel)]="form.binanceSecret" maxlength="100" minlength="90" #binanceSecret="ngModel"/>
          <div class="alert-danger d-flex align-items-center" *ngIf="binanceSecret.errors && f.submitted">
            <div *ngIf="binanceSecret.errors.maxlength || binanceSecret.errors.minlength">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgClaveSecretaError }}
            </div>
          </div>
        </div><!-- Key API Binance -->
  
        <div class="form-group">
          <label for="krakenSecret">Clave secreta de Kraken</label>
          <input type="text" class="form-control" name="krakenSecret" [(ngModel)]="form.krakenSecret" maxlength="100" minlength="90" #krakenSecret="ngModel"/>
          <div class="alert-danger d-flex align-items-center" *ngIf="krakenSecret.errors && f.submitted">
            <div *ngIf="krakenSecret.errors.maxlength || krakenSecret.errors.minlength">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle-fill" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              {{ msgClaveSecretaError }}
            </div>
          </div>
        </div><!-- Key API Kraken -->
  
        <div id="classBtn" class="form-group">
          <button class="btn btn-outline-primary" type="submit">Registrarse</button>
        </div>
  
        <div class="alert alert-danger" *ngIf="f.submitted && isSignUpFailed">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-circle-fill" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"/>
          </svg>
          Error en el Registro!<br/>Error: {{ errorMessage }}
        </div><!-- msg si algo sale mal -->
      </form>
      <div class="alert alert-success" *ngIf="isSuccessful">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
        </svg>
        Te has registrado correctamente. Ya puedes iniciar sesión.
      </div><!-- msg si todo sale bien -->
    </div>
  </div>
</div>


